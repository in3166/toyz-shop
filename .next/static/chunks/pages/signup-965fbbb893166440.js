(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[616],{28575:function(e,n,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/signup",function(){return r(48572)}])},54608:function(e,n,r){"use strict";var t=r(14924),o=r(85893),a=r(12571),u=r(15845),s=r(99176),i=r(39372),c=r.n(i);n.Z=function(e){var n=e.formTitle,r=e.value,i=e.onBlur,l=e.onChange,d=e.reset,f=e.hasError,p=e.type,g=e.errorMessage,m=e.inputFocusRef,_=e.read,v=e.rows;return(0,a.b6)(function(){var e;null==m||null===(e=m.current)||void 0===e||e.focus()}),(0,o.jsxs)("div",{className:c().inputForm,children:[(0,o.jsx)("label",{htmlFor:n,className:c().formTitle,children:n}),"textarea"!==p?(0,o.jsx)("input",{type:p,id:n,value:r,onBlur:i,onChange:l,className:(0,s.cx)(c().inputText,(0,t.Z)({},c().readOnlyInput,_)),ref:m,readOnly:_,autoComplete:"current-".concat(n)}):(0,o.jsx)("textarea",{id:n,value:r,onBlur:i,onChange:l,className:(0,s.cx)(c().inputTextarea,(0,t.Z)({},c().readOnlyInput,_)),ref:m,readOnly:_,autoComplete:"current-".concat(n),rows:v}),!_&&(0,o.jsx)(u.oC,{className:(0,s.cx)((0,t.Z)({},c().iconHidden,""===r)),onClick:function(){d&&d()}}),f&&(0,o.jsx)("p",{className:c().errorMessage,children:g})]})}},11018:function(e,n,r){"use strict";var t=r(14924),o=r(85893),a=r(99176),u=r(93578),s=r.n(u),i=r(15845),c=r(67294);n.Z=c.memo(function(e){var n=e.message,r=e.setMessage,u=e.status;return(0,o.jsxs)("div",{role:"alert",className:(0,a.cx)(s().snackBar,(0,t.Z)({},s().visible,""!==n),(0,t.Z)({},s().warning,"warning"===u),(0,t.Z)({},s().error,"error"===u)),children:[n,(0,o.jsx)("button",{type:"button",onClick:function(){return r("")},children:(0,o.jsx)(i.Tw,{})})]})})},21025:function(e,n,r){"use strict";r.d(n,{D:function(){return u}});var t=r(828),o=r(67294),a=r(54021),u=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:5e3,n=(0,t.Z)((0,o.useState)(""),2),r=n[0],u=n[1],s=(0,o.useRef)(null),i=(0,o.useCallback)(function(e){u(e)},[]),c=function(){s.current&&clearTimeout(s.current)};return(0,a.Z)(function(){s.current&&c(),""!==r&&(s.current=setTimeout(function(){u(""),c()},e+100))},[r]),(0,o.useEffect)(function(){return function(){s.current&&c(),u("")}},[]),{message:r,setMessage:i,clearTimer:c}}},57896:function(e,n,r){"use strict";var t=r(828),o=r(67294);n.Z=function(e){var n=e.validateFunction,r=e.initialValue,a=void 0===r?"":r,u=(0,t.Z)((0,o.useState)(a),2),s=u[0],i=u[1],c=(0,t.Z)((0,o.useState)(!1),2),l=c[0],d=c[1],f=!0;n&&(f=n(s));var p=!f&&l,g=(0,o.useCallback)(function(e){i(e.currentTarget.value)},[]),m=(0,o.useCallback)(function(e){i(e.currentTarget.value)},[]),_=(0,o.useCallback)(function(){d(!0)},[]),v=(0,o.useCallback)(function(){i(a),d(!1)},[a]);return{value:s,setValue:i,hasError:p,valueIsValid:f,valueChangeHandler:g,valueClickHandler:m,inputBlurHandler:_,reset:v}}},38947:function(e,n,r){"use strict";function t(e){switch(e){case 1e4:return"Wrong Method.";case 11e3:return"Duplicate key error.";case 10001:return"User not found.";case 10003:return"Not Correct Password.";default:return"Unknown Error."}}r.d(n,{Z:function(){return t}})},48572:function(e,n,r){"use strict";r.r(n),r.d(n,{__N_SSG:function(){return w},default:function(){return k}});var t=r(47568),o=r(26042),a=r(69396),u=r(70655),s=r(85893),i=r(9008),c=r.n(i),l=r(11163),d=r(33299),f=r(38947),p=r(828),g=r(67294),m=r(12571),_=r(57896),v=r(94893),h=r(54608),x=r(11018),Z=r(21025),j=r(50787),y=r.n(j),B=function(e){var n,r,o,a,i=e.onAddUser,c=(0,m.QT)(),d=(0,g.useRef)(null),f=null!==(a=null===(r=(0,l.useRouter)().query)||void 0===r?void 0:null===(o=r.email)||void 0===o?void 0:o.toString())&&void 0!==a?a:"",j=(0,p.Z)((0,g.useState)(""),2),B=j[0],T=j[1],U=(0,p.Z)((0,g.useState)(!1),2),b=U[0],w=U[1],k=(0,Z.D)(5e3),C=k.message,N=k.setMessage,O=(0,_.Z)({validateFunction:v.un,initialValue:""}),E=(0,_.Z)({validateFunction:v.Ol,initialValue:""}),F=(0,_.Z)({validateFunction:v.uo,initialValue:""}),S=(0,_.Z)({validateFunction:v.Y0,initialValue:""}),M=(0,_.Z)({validateFunction:v.oH,initialValue:f||""}),H=(n=(0,t.Z)(function(e){var n;return(0,u.__generator)(this,function(r){switch(r.label){case 0:if(w(!0),e.preventDefault(),!O.valueIsValid||!F.valueIsValid||!S.valueIsValid||!E.valueIsValid)return T("warning"),N("".concat(c("common:signUp.snackBar"))),w(!1),[2];return[4,i({id:O.value,name:E.value,password:F.value,email:f||M.value,phone:S.value})];case 1:return(n=r.sent())&&(T("error"),N("[".concat(n.code||"Error","]: ").concat(n.message))),w(!1),[2]}})}),function(e){return n.apply(this,arguments)});return(0,s.jsxs)("form",{onSubmit:H,className:y().signUpForm,children:[b&&(0,s.jsx)("div",{className:y().loadingBar}),(0,s.jsx)(h.Z,{type:"text",formTitle:"".concat(c("common:signUp.titleID")),value:O.value,onChange:O.valueChangeHandler,reset:O.reset,onBlur:O.inputBlurHandler,hasError:O.hasError,errorMessage:"".concat(c("common:signUp.errorMessageID")),inputFocusRef:d}),(0,s.jsx)(h.Z,{type:"password",formTitle:"".concat(c("common:signUp.titlePW")),value:F.value,onChange:F.valueChangeHandler,reset:F.reset,onBlur:F.inputBlurHandler,hasError:F.hasError,errorMessage:"".concat(c("common:signUp.errorMessagePW"))}),(0,s.jsx)(h.Z,{type:"text",formTitle:"".concat(c("common:signUp.titleName")),value:E.value,onChange:E.valueChangeHandler,reset:E.reset,onBlur:E.inputBlurHandler,hasError:E.hasError,errorMessage:"".concat(c("common:signUp.errorMessageName"))}),(0,s.jsx)(h.Z,{type:"text",formTitle:"".concat(c("common:signUp.titlePhone")),value:S.value,onChange:S.valueChangeHandler,reset:S.reset,onBlur:S.inputBlurHandler,hasError:S.hasError,errorMessage:"".concat(c("common:signUp.errorMessagePhone"))}),(0,s.jsx)(h.Z,{type:"text",formTitle:"".concat(c("common:signUp.titleEmail")),value:f||M.value,onChange:M.valueChangeHandler,reset:M.reset,onBlur:M.inputBlurHandler,hasError:M.hasError,read:""!==f,errorMessage:""===f&&"".concat(c("common:signUp.errorMessageEmail"))||""}),(0,s.jsx)("footer",{className:y().footer,children:(0,s.jsx)("button",{type:"submit",className:y().signUpButton,children:"".concat(c("common:signUp.button"))})}),C&&(0,s.jsx)(x.Z,{message:C,status:B,setMessage:N})]})},T=r(15845),U=r(86839),b=r.n(U),w=!0,k=function(){var e,n=(0,l.useRouter)(),r=(e=(0,t.Z)(function(e){var r,t,s,i,c,l,p;return(0,u.__generator)(this,function(u){switch(u.label){case 0:e.likes=[],u.label=1;case 1:return u.trys.push([1,5,,6]),[4,fetch("/api/users",{method:"POST",body:JSON.stringify(e),headers:{"Content-Type":"application/json"}})];case 2:return[4,u.sent().json()];case 3:if(!(r=u.sent()).success)return c=(null===(t=r.error)||void 0===t?void 0:null===(s=t.keyValue)||void 0===s?void 0:s.email)!==void 0?"Email":"ID",l=(r.error.message?r.error.message:(0,f.Z)(null===(i=r.error)||void 0===i?void 0:i.code))+" (".concat(c,")"),[2,(0,a.Z)((0,o.Z)({},r.error),{message:l})];return[4,(0,d.signIn)("credentials",{id:e.id,password:e.password,redirect:!1})];case 4:if(!(null==(p=u.sent())?void 0:p.ok))return[2,Error(null==p?void 0:p.error)];return n.push("/"),[2,null];case 5:return[2,u.sent()];case 6:return[2]}})}),function(n){return e.apply(this,arguments)});return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(c(),{children:[(0,s.jsx)("title",{children:"Add a New User"}),(0,s.jsx)("meta",{name:"description",content:"You can join our Toyz shop!"})]}),(0,s.jsxs)("main",{className:b().formWrapper,children:[(0,s.jsx)("header",{className:b().header,children:(0,s.jsx)("h3",{className:b().id,children:(0,s.jsx)(T.DB,{})})}),(0,s.jsx)("div",{className:b().content,children:(0,s.jsx)(B,{onAddUser:r})})]})]})}},94893:function(e,n,r){"use strict";function t(e){return e.toString().length>3}function o(e){var n=e.toString();return/^(?=.*\d)(?=.*[a-zA-Z]).{6,20}$/.test(n)}function a(e){return e.toString().length>1}function u(e){var n=e.toString();return/^\d{2,3}-\d{1,4}-\d{1,4}$/.test(n)}function s(e){var n=e.toString();return/[0-9a-zA-Z]([-_.]?[0-9a-zA-Z])*@[0-9a-zA-Z]([-_.]?[0-9a-zA-Z])*.[a-zA-Z]$/i.test(n)}function i(e){return e.toString().length>3}function c(e){return Number(e)>0}function l(e){return e.toString().length>4}r.d(n,{$Q:function(){return c},Ol:function(){return a},Y0:function(){return u},eT:function(){return i},ko:function(){return l},oH:function(){return s},un:function(){return t},uo:function(){return o}})},50787:function(e){e.exports={signUpForm:"signUpForm_signUpForm__sD_4O",footer:"signUpForm_footer__9IIvo",signUpButton:"signUpForm_signUpButton__lJhxu",loadingBar:"signUpForm_loadingBar__LxD3J",loadingScroll:"signUpForm_loadingScroll__l6V0e",rotation:"signUpForm_rotation__ZT8Yr",moveRight:"signUpForm_moveRight__UNnhS",openModal:"signUpForm_openModal__wY04J"}},39372:function(e){e.exports={inputForm:"inputText_inputForm__sq49X",formTitle:"inputText_formTitle__mKBoA",iconHidden:"inputText_iconHidden__3_vtu",inputText:"inputText_inputText__oJzmB",inputTextarea:"inputText_inputTextarea__0nq9O",readOnlyInput:"inputText_readOnlyInput__baNB1",errorMessage:"inputText_errorMessage__ddIYe"}},93578:function(e){e.exports={snackBar:"snackBar_snackBar__Jfgy5",moveRight:"snackBar_moveRight__VOTmc",warning:"snackBar_warning__rjYfH",error:"snackBar_error__bNCLK",rotation:"snackBar_rotation__uNEnZ",openModal:"snackBar_openModal__uFaxz",loadingScroll:"snackBar_loadingScroll__pW3gr"}},86839:function(e){e.exports={formWrapper:"signUp_formWrapper__LCkEL",footer:"signUp_footer__APQvf",signUpButton:"signUp_signUpButton__QqDZx"}},9008:function(e,n,r){e.exports=r(83121)},54021:function(e,n,r){"use strict";r.d(n,{Z:function(){return o}});var t=r(67294),o=function(e,n){var r,o=(r=(0,t.useRef)(!0)).current?(r.current=!1,!0):r.current;(0,t.useEffect)(function(){if(!o)return e()},n)}},47568:function(e,n,r){"use strict";function t(e,n,r,t,o,a,u){try{var s=e[a](u),i=s.value}catch(c){r(c);return}s.done?n(i):Promise.resolve(i).then(t,o)}function o(e){return function(){var n=this,r=arguments;return new Promise(function(o,a){var u=e.apply(n,r);function s(e){t(u,o,a,s,i,"next",e)}function i(e){t(u,o,a,s,i,"throw",e)}s(void 0)})}}r.d(n,{Z:function(){return o}})},69396:function(e,n,r){"use strict";function t(e,n){return n=null!=n?n:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):(function(e,n){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);r.push.apply(r,t)}return r})(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))}),e}r.d(n,{Z:function(){return t}})}},function(e){e.O(0,[774,888,179],function(){return e(e.s=28575)}),_N_E=e.O()}]);